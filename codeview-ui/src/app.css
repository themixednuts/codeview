@import url('https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,600;9..144,700&family=Space+Grotesk:wght@400;500;600&display=swap');
@import "tailwindcss";

@layer base {
  :root {
    color-scheme: light;
    --font-display: 'Fraunces', serif;
    --font-body: 'Space Grotesk', sans-serif;
    --font-code: var(--font-body);
    --radius-panel: 1.5rem;
    --radius-card: 1rem;
    --radius-control: 0.75rem;
    --radius-chip: 0.625rem;
    --radius-popover: 0.875rem;
    --bg: #f4efe6;
    --bg-strong: #fdf8f0;
    --bg-top: rgba(247, 226, 197, 0.85);
    --bg-bottom: rgba(235, 199, 173, 0.6);
    --bg-glow: #f7e2c5;
    --panel: #fffaf1;
    --panel-strong: #fff4e3;
    --panel-solid: #ffffff;
    --panel-muted: #f6efe4;
    --panel-border: rgba(38, 28, 20, 0.12);
    --ink: #261c14;
    --muted: #6f5f54;
    --accent: #d76a2f;
    --accent-strong: #c45123;
    --shadow-soft: 0 12px 24px rgba(38, 28, 20, 0.08);
    --shadow-strong: 0 18px 32px rgba(38, 28, 20, 0.12);
    --shadow-glow: 0 24px 50px rgba(38, 28, 20, 0.12);
    --code-bg: #f6f1e8;
    --code-border: rgba(38, 28, 20, 0.12);
    --code-ink: #2b241e;
    --danger: #b42318;
    --danger-bg: #fff1f0;
    --danger-border: rgba(180, 35, 24, 0.2);
    --success: #2f855a;
    --grid-line: rgba(38, 28, 20, 0.08);
    --edge-in: #94a3b8;
    --edge-in-strong: #475569;
    --edge-default: #5c6f7c;
    --edge-contains: #c45d4f;
    --edge-defines: #b85c3f;
    --edge-implements: #4d6d7a;
    --edge-uses: #6d7a5b;
    --edge-calls: #785a8e;
    --edge-calls-runtime: #8c6f5a;
    --edge-derives: #5d7c74;
    --kind-crate: #d1495b;
    --kind-module: #f08a5d;
    --kind-struct: #f2b04b;
    --kind-union: #6c8ead;
    --kind-enum: #2e8f96;
    --kind-trait: #7a5b6c;
    --kind-trait-alias: #8f7aa5;
    --kind-impl: #3d5a80;
    --kind-function: #4d9078;
    --kind-method: #577590;
    --kind-type-alias: #bc5f5f;
    --kind-other: #a07a63;
  }

  :root[data-theme='dark'] {
    color-scheme: dark;
    --bg: #0e1117;
    --bg-strong: #101722;
    --bg-top: rgba(46, 62, 86, 0.35);
    --bg-bottom: rgba(11, 14, 20, 0.85);
    --bg-glow: #1f2a3a;
    --panel: #151b23;
    --panel-strong: #1d2430;
    --panel-solid: #171d27;
    --panel-muted: #11161d;
    --panel-border: rgba(148, 163, 184, 0.18);
    --ink: #e6edf3;
    --muted: #9aa4b2;
    --accent: #f08a5d;
    --accent-strong: #f6a879;
    --shadow-soft: 0 12px 24px rgba(0, 0, 0, 0.35);
    --shadow-strong: 0 18px 32px rgba(0, 0, 0, 0.45);
    --shadow-glow: 0 24px 50px rgba(0, 0, 0, 0.55);
    --code-bg: #0d1117;
    --code-border: rgba(148, 163, 184, 0.2);
    --code-ink: #c9d1d9;
    --danger: #ffb4ad;
    --danger-bg: rgba(180, 35, 24, 0.2);
    --danger-border: rgba(255, 180, 173, 0.25);
    --success: #7ce7ac;
    --grid-line: rgba(148, 163, 184, 0.2);
    --edge-in: #94a3b8;
    --edge-in-strong: #cbd5e1;
  }

  body {
    min-height: 100vh;
    font-family: var(--font-body);
    color: var(--ink);
    background:
      radial-gradient(circle at top left, var(--bg-top), transparent 48%),
      radial-gradient(circle at bottom right, var(--bg-bottom), transparent 50%),
      linear-gradient(120deg, var(--bg), var(--bg-strong) 60%);
    background-color: var(--bg);
  }

  code,
  pre,
  kbd,
  samp {
    font-family: var(--font-code);
  }

  h1,
  h2,
  h3,
  .font-display {
    font-family: var(--font-display);
  }
}

@layer components {
  .graph-node text {
    font-size: 0.7rem;
    font-weight: 500;
    font-family: var(--font-body);
    fill: var(--ink);
    text-anchor: middle;
    pointer-events: none;
  }

  .graph-node circle {
    stroke: rgba(255, 255, 255, 0.7);
    stroke-width: 2px;
    transition: transform 0.2s ease, stroke 0.2s ease, stroke-width 0.2s ease;
    cursor: pointer;
  }

  .graph-node.selected circle {
    stroke: var(--accent-strong);
    stroke-width: 3px;
  }

  .graph-link {
    stroke-width: 1.6px;
    opacity: 0.85;
  }

  .graph-link.inferred {
    stroke-dasharray: 4 4;
  }

  .graph-link.runtime {
    stroke-dasharray: 8 4;
  }

  .badge {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    border-radius: var(--radius-chip);
    border: 1px solid var(--panel-border);
    background: var(--panel);
    padding: 0.125rem 0.5rem;
    font-size: 0.75rem;
    font-weight: 600;
    color: var(--muted);
  }

  .badge-strong {
    background: var(--panel-strong);
    color: var(--ink);
  }

  .token-name {
    font-family: var(--font-code);
    font-weight: 600;
    color: var(--ink);
  }

  .token-type {
    font-family: var(--font-code);
    font-weight: 600;
    color: var(--accent-strong);
  }

  .token-meta {
    font-family: var(--font-code);
    color: var(--muted);
  }

  .shiki,
  .shiki code {
    font-family: var(--font-code);
  }

  @supports (corner-shape: squircle) {
    .corner-squircle {
      corner-shape: squircle;
    }

    .badge {
      corner-shape: squircle;
    }

    .code-block pre {
      corner-shape: squircle;
    }
  }
}

@keyframes float-in {
  from {
    opacity: 0;
    transform: translateY(16px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes shimmer {
  from {
    opacity: 0.6;
  }
  to {
    opacity: 1;
  }
}

/* View Transitions API styles */
::view-transition-old(root),
::view-transition-new(root) {
  animation: none;
  mix-blend-mode: normal;
}

/* Fast, snappy node transitions when changing layouts */
::view-transition-group(*) {
  animation-duration: 150ms;
  animation-timing-function: cubic-bezier(0.2, 0, 0, 1);
}

::view-transition-old(*):only-child {
  animation: none;
}

::view-transition-new(*):only-child {
  animation: none;
}

/* Contain view transitions within graph area */
.graph-container {
  contain: layout style paint;
}
