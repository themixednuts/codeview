name = "codeview"
compatibility_date = "2025-01-01"
compatibility_flags = ["nodejs_compat"]
main = ".svelte-kit/cloudflare/_worker.js"
assets = { directory = ".svelte-kit/cloudflare", binding = "ASSETS" }

[durable_objects]
bindings = [
  { name = "GRAPH_STORE", class_name = "GraphStore", script_name = "codeview-services" },
  { name = "CRATE_REGISTRY", class_name = "CrateRegistry", script_name = "codeview-services" }
]

[[workflows]]
name = "parse-crate"
binding = "PARSE_CRATE"
class_name = "ParseCrateWorkflow"
script_name = "codeview-services"

[[r2_buckets]]
binding = "CRATE_GRAPHS"
bucket_name = "crate-graphs"

[[ratelimits]]
name = "RATE_LIMIT_API"
namespace_id = "1001"
simple = { limit = 60, period = 60 }

[[ratelimits]]
name = "RATE_LIMIT_PARSE"
namespace_id = "1002"
simple = { limit = 5, period = 60 }
